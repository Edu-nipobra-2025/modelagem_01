<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="sid-38422fae-e03e-43a3-bef4-bd33b32041b2" targetNamespace="http://bpmn.io/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <collaboration id="Collaboration_092zt81">
    <participant id="Participant_0orsrjc" name="Usuario" processRef="Process_1" />
    <participant id="Participant_05v661i" name="Sistema" processRef="Process_0yy4kow" />
    <participant id="Participant_1vqo7js" name="Banco de Dados" processRef="Process_07p8jck" />
    <messageFlow id="Flow_1n6pao1" sourceRef="Activity_1te4zao" targetRef="Activity_02ouilv" />
    <messageFlow id="Flow_14sffyh" sourceRef="Activity_1q05ytf" targetRef="Activity_15cc9qx" />
    <messageFlow id="Flow_1fr7jjb" sourceRef="Activity_1hd2bkm" targetRef="Activity_0rsynnf" />
    <messageFlow id="Flow_0z4kqcg" sourceRef="Activity_0syss98" targetRef="Activity_1o17cbp" />
  </collaboration>
  <process id="Process_1" isExecutable="false">
    <task id="Activity_1te4zao" name="Chamar API Asaas">
      <incoming>Flow_1ec3f9z</incoming>
    </task>
    <startEvent id="Event_032y6zz" name="Gerar QRCODE">
      <outgoing>Flow_1ec3f9z</outgoing>
    </startEvent>
    <task id="Activity_15cc9qx" name="Solicitação de transferência">
      <outgoing>Flow_05m9ko4</outgoing>
    </task>
    <task id="Activity_1hd2bkm" name="Enviar pro sistema">
      <incoming>Flow_071ewjn</incoming>
    </task>
    <task id="Activity_04tefrk" name="Saldo insuficiente">
      <incoming>Flow_08gyjci</incoming>
      <outgoing>Flow_0tqv523</outgoing>
    </task>
    <task id="Activity_0srw3my" name="Notificar usuário sobre saldo insuficiente">
      <incoming>Flow_0tqv523</incoming>
      <outgoing>Flow_01ftjt8</outgoing>
    </task>
    <endEvent id="Event_1tjbgxn" name="Transferência cancelada">
      <incoming>Flow_01ftjt8</incoming>
    </endEvent>
    <task id="Activity_1o17cbp" name="Notificar usuário sobre saldo insuficiente">
      <outgoing>Flow_0elie63</outgoing>
    </task>
    <endEvent id="Event_1lejp3t" name="Transferência Realizada">
      <incoming>Flow_0elie63</incoming>
    </endEvent>
    <exclusiveGateway id="Gateway_060o623" name="Saldo é suficiente?">
      <incoming>Flow_1siw926</incoming>
      <outgoing>Flow_08gyjci</outgoing>
      <outgoing>Flow_071ewjn</outgoing>
    </exclusiveGateway>
    <task id="Activity_1y0pke8" name="Informar valor e confirmar">
      <incoming>Flow_05m9ko4</incoming>
      <outgoing>Flow_1siw926</outgoing>
    </task>
    <sequenceFlow id="Flow_1ec3f9z" sourceRef="Event_032y6zz" targetRef="Activity_1te4zao" />
    <sequenceFlow id="Flow_05m9ko4" sourceRef="Activity_15cc9qx" targetRef="Activity_1y0pke8" />
    <sequenceFlow id="Flow_071ewjn" sourceRef="Gateway_060o623" targetRef="Activity_1hd2bkm" />
    <sequenceFlow id="Flow_08gyjci" sourceRef="Gateway_060o623" targetRef="Activity_04tefrk" />
    <sequenceFlow id="Flow_0tqv523" sourceRef="Activity_04tefrk" targetRef="Activity_0srw3my" />
    <sequenceFlow id="Flow_01ftjt8" sourceRef="Activity_0srw3my" targetRef="Event_1tjbgxn" />
    <sequenceFlow id="Flow_0elie63" sourceRef="Activity_1o17cbp" targetRef="Event_1lejp3t" />
    <sequenceFlow id="Flow_1siw926" sourceRef="Activity_1y0pke8" targetRef="Gateway_060o623" />
  </process>
  <process id="Process_0yy4kow">
    <task id="Activity_02ouilv" name="Notificação de Pagamento (Webhook)">
      <outgoing>Flow_0779h12</outgoing>
    </task>
    <task id="Activity_1q05ytf" name="Atualizar Saldo">
      <incoming>Flow_0779h12</incoming>
      <dataOutputAssociation id="DataOutputAssociation_1dq858j">
        <targetRef>DataStoreReference_0uz5ubo</targetRef>
      </dataOutputAssociation>
    </task>
    <task id="Activity_0rsynnf" name="Calcular retenção de 7%">
      <outgoing>Flow_136g8ix</outgoing>
    </task>
    <task id="Activity_0a0nrsa" name="Chamar API para executar transferência">
      <incoming>Flow_136g8ix</incoming>
      <outgoing>Flow_1x77lui</outgoing>
    </task>
    <task id="Activity_1fb5dcc" name="Registar transação de saída no BD">
      <incoming>Flow_1x77lui</incoming>
      <outgoing>Flow_0gczgic</outgoing>
      <dataOutputAssociation id="DataOutputAssociation_1ylygtb">
        <targetRef>DataStoreReference_1kue9fp</targetRef>
      </dataOutputAssociation>
    </task>
    <task id="Activity_0syss98" name="Transferência Realizada">
      <incoming>Flow_0gczgic</incoming>
    </task>
    <sequenceFlow id="Flow_0779h12" sourceRef="Activity_02ouilv" targetRef="Activity_1q05ytf" />
    <sequenceFlow id="Flow_136g8ix" sourceRef="Activity_0rsynnf" targetRef="Activity_0a0nrsa" />
    <sequenceFlow id="Flow_1x77lui" sourceRef="Activity_0a0nrsa" targetRef="Activity_1fb5dcc" />
    <sequenceFlow id="Flow_0gczgic" sourceRef="Activity_1fb5dcc" targetRef="Activity_0syss98" />
  </process>
  <process id="Process_07p8jck">
    <dataStoreReference id="DataStoreReference_0uz5ubo" name="Saldo Atualizado" />
    <dataStoreReference id="DataStoreReference_1kue9fp" />
  </process>
  <bpmndi:BPMNDiagram id="BpmnDiagram_1">
    <bpmndi:BPMNPlane id="BpmnPlane_1" bpmnElement="Collaboration_092zt81">
      <bpmndi:BPMNShape id="Participant_0orsrjc_di" bpmnElement="Participant_0orsrjc" isHorizontal="true">
        <omgdc:Bounds x="152" y="80" width="1318" height="310" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1te4zao_di" bpmnElement="Activity_1te4zao">
        <omgdc:Bounds x="190" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_032y6zz_di" bpmnElement="Event_032y6zz">
        <omgdc:Bounds x="222" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="199" y="158" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_15cc9qx_di" bpmnElement="Activity_15cc9qx">
        <omgdc:Bounds x="320" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1hd2bkm_di" bpmnElement="Activity_1hd2bkm">
        <omgdc:Bounds x="700" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04tefrk_di" bpmnElement="Activity_04tefrk">
        <omgdc:Bounds x="730" y="130" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0agsfh9" bpmnElement="Activity_0srw3my">
        <omgdc:Bounds x="880" y="130" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1tjbgxn_di" bpmnElement="Event_1tjbgxn">
        <omgdc:Bounds x="1042" y="152" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1028" y="195" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_095l1dk" bpmnElement="Activity_1o17cbp">
        <omgdc:Bounds x="1130" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lejp3t_di" bpmnElement="Event_1lejp3t">
        <omgdc:Bounds x="1362" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1347" y="315" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_060o623_di" bpmnElement="Gateway_060o623" isMarkerVisible="true">
        <omgdc:Bounds x="625" y="265" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="622.5" y="322" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1y0pke8_di" bpmnElement="Activity_1y0pke8">
        <omgdc:Bounds x="470" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1ec3f9z_di" bpmnElement="Flow_1ec3f9z">
        <omgdi:waypoint x="240" y="218" />
        <omgdi:waypoint x="240" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05m9ko4_di" bpmnElement="Flow_05m9ko4">
        <omgdi:waypoint x="420" y="290" />
        <omgdi:waypoint x="470" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_071ewjn_di" bpmnElement="Flow_071ewjn">
        <omgdi:waypoint x="675" y="290" />
        <omgdi:waypoint x="700" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08gyjci_di" bpmnElement="Flow_08gyjci">
        <omgdi:waypoint x="650" y="265" />
        <omgdi:waypoint x="650" y="170" />
        <omgdi:waypoint x="730" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0tqv523_di" bpmnElement="Flow_0tqv523">
        <omgdi:waypoint x="830" y="170" />
        <omgdi:waypoint x="880" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01ftjt8_di" bpmnElement="Flow_01ftjt8">
        <omgdi:waypoint x="980" y="170" />
        <omgdi:waypoint x="1042" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0elie63_di" bpmnElement="Flow_0elie63">
        <omgdi:waypoint x="1230" y="290" />
        <omgdi:waypoint x="1362" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1siw926_di" bpmnElement="Flow_1siw926">
        <omgdi:waypoint x="570" y="290" />
        <omgdi:waypoint x="625" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_05v661i_di" bpmnElement="Participant_05v661i" isHorizontal="true">
        <omgdc:Bounds x="152" y="390" width="1318" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_02ouilv_di" bpmnElement="Activity_02ouilv">
        <omgdc:Bounds x="190" y="480" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1q05ytf_di" bpmnElement="Activity_1q05ytf">
        <omgdc:Bounds x="320" y="480" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rsynnf_di" bpmnElement="Activity_0rsynnf">
        <omgdc:Bounds x="700" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0a0nrsa_di" bpmnElement="Activity_0a0nrsa">
        <omgdc:Bounds x="830" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_06c66zc" bpmnElement="Activity_1fb5dcc">
        <omgdc:Bounds x="990" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0syss98_di" bpmnElement="Activity_0syss98">
        <omgdc:Bounds x="1130" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0779h12_di" bpmnElement="Flow_0779h12">
        <omgdi:waypoint x="290" y="520" />
        <omgdi:waypoint x="320" y="520" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_136g8ix_di" bpmnElement="Flow_136g8ix">
        <omgdi:waypoint x="800" y="490" />
        <omgdi:waypoint x="830" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1x77lui_di" bpmnElement="Flow_1x77lui">
        <omgdi:waypoint x="930" y="490" />
        <omgdi:waypoint x="990" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gczgic_di" bpmnElement="Flow_0gczgic">
        <omgdi:waypoint x="1090" y="490" />
        <omgdi:waypoint x="1130" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1vqo7js_di" bpmnElement="Participant_1vqo7js" isHorizontal="true">
        <omgdc:Bounds x="152" y="640" width="1318" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0uz5ubo_di" bpmnElement="DataStoreReference_0uz5ubo">
        <omgdc:Bounds x="345" y="715" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="329" y="772" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1kue9fp_di" bpmnElement="DataStoreReference_1kue9fp">
        <omgdc:Bounds x="1015" y="705" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1n6pao1_di" bpmnElement="Flow_1n6pao1">
        <omgdi:waypoint x="240" y="330" />
        <omgdi:waypoint x="240" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14sffyh_di" bpmnElement="Flow_14sffyh">
        <omgdi:waypoint x="370" y="480" />
        <omgdi:waypoint x="370" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fr7jjb_di" bpmnElement="Flow_1fr7jjb">
        <omgdi:waypoint x="749" y="330" />
        <omgdi:waypoint x="749" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z4kqcg_di" bpmnElement="Flow_0z4kqcg">
        <omgdi:waypoint x="1180" y="450" />
        <omgdi:waypoint x="1180" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1dq858j_di" bpmnElement="DataOutputAssociation_1dq858j">
        <omgdi:waypoint x="370" y="560" />
        <omgdi:waypoint x="370" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1ylygtb_di" bpmnElement="DataOutputAssociation_1ylygtb">
        <omgdi:waypoint x="1040" y="530" />
        <omgdi:waypoint x="1040" y="705" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
